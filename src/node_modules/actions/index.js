import { 
    FETCH_PRICE_SUCCESS,
    FETCH_PRICE_START,
    FETCH_PRICE_FAILURE,

    FETCH_COIN_START,
    FETCH_COIN_SUCCESS,
    FETCH_COIN_FAILURE,
 } from "actionsTypes"
import request from 'superagent'

export const fetchPrice = () => async dispatch =>{
    dispatch({type:FETCH_PRICE_START})

    try {
        request.get("https://api.coinmarketcap.com/v1/ticker/?limit=28").then(
            res => dispatch({
                type: FETCH_PRICE_SUCCESS, payload: res.body
            })
        )    
    } catch (error) {
        dispatch({
            type:FETCH_PRICE_FAILURE,
            payload:error
        })
    }

}
/* 1 - coin action */ 
export const fetchCoin = (id) => async dispatch => {
    dispatch({type:FETCH_COIN_START})
    try {
        request.get(`https://api.coinmarketcap.com/v1/ticker/${id}/?convert=ETH`).then(
            res => dispatch({
                type: FETCH_COIN_SUCCESS , payload: res.body
            })
        )
    } catch (error) {
        
    }
}