import { connect } from 'react-redux'
import React, { Component } from 'react'
import { fetchCoin } from 'actions'
import R from 'ramda'
import getCoin from 'selectors'
import { Link } from 'react-router'

class Coin extends Component {
    componentDidMount() {
        this.props.fetchCoin(this.props.params.id)
    }

    render() {
        const { coin } = this.props
        
            return coin ? <h1>{coin.id}</h1> : <h1>...loading</h1>
        
    }
}

const mapDispatchToProps = {
    fetchCoin
}

const coinSelector = (state, ownProps) => {
    console.log(
        'id:',
        ownProps.match ? R.prop(ownProps.match.params.id.toLowerCase(), state.coin) : {}
    )
    console.log('coins in store:', state.coin)
    console.log(
        'selected data:',
        ownProps.match ? R.prop(ownProps.match.params.id.toLowerCase(), state.coin) : {},
    )

    return
    ownProps.match ? R.prop(ownProps.match.params.id.toLowerCase(), state.coin) : {}
}

const mapStateToProps = (state, ownProps) => ({
    coin: coinSelector(state, ownProps)
})


export default connect(mapStateToProps, mapDispatchToProps)(Coin)